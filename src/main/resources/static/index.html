<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, minimal-ui">
		<title>hello</title>
		<link rel="icon" type="image/x-icon" href="favicon.ico">
		<link href="roboto/css.css" rel="stylesheet">
		<link href="font/css/materialdesignicons.min.css" rel="stylesheet">
		<link href="vuetify/vuetify.min.css" rel="stylesheet">
	</head>
	<body>
		<div id="app">
			<v-app>
			  <v-main>
				<v-container>
		          <template v-for="(user, i) in users">
					  <v-row>
				            <v-col class="mt-2" cols="1">
				              <v-btn large depressed color="primary" @click="clickme(i)">{{user.username}}</v-btn>
				            </v-col>
				            <v-col md="2" cols="1" v-if="user.type != null">
				              <v-alert :type="user.type">{{user.message}} , {{user.data}}</v-alert>
				            </v-col>
			          </v-row>
		          </template>
				</v-container>
			  </v-main>
			</v-app>
		</div>
	</body>
	<script src="vue/vue.min.js"></script>
	<script src="vuetify/vuetify.min.js"></script>
	<script type="text/javascript">
		new Vue({
			el:'#app',
			vuetify: new Vuetify({
				theme: { dark: true },
			}),
			data:{
				users: [
					{userNo:'100230',password:'123456',username:'张维维',type:null,message:'',data:''},
					{userNo:'100245',password:'123456',username:'王哲',type:null,message:'',data:''},
					{userNo:'100232',password:'123456',username:'李米盛',type:null,message:'',data:''},
					{userNo:'100627',password:'123456',username:'关晓鹏',type:null,message:'',data:''},
					{userNo:'100226',password:'123456',username:'刘常富',type:null,message:'',data:''},
					{userNo:'100246',password:'123456',username:'李贺彦',type:null,message:'',data:''},
				],
			},
			methods: {
				clickme(index){
					let user=this.users[index];
					fetch('/hello/userLoginAndStaffClock', {
						  method: 'POST',
						  body: JSON.stringify(user),
						  headers: new Headers({
						    'Content-Type': 'application/json'
						  })
						}).then(res => res.json())
						.catch(err => {
							console.error('Error:', err);
							user.type='error';
							user.message=err.message;
							user.data='';
						})
						.then(res => {
							console.log('Success:', res);
							user.type = res.status === 1 ? 'success' : 'error';
							user.message=res.message;
							user.data=res.data;
						});
				}
		    }
		})
	</script>
</html>

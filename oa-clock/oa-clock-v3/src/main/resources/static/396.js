"use strict";(self.webpackChunkmy_angular=self.webpackChunkmy_angular||[]).push([[396],{3396:(fe,p,s)=>{s.r(p),s.d(p,{WelcomeModule:()=>he});var g=s(6671),k=s(5861),c=s(433),h=s(7910),e=s(4650),b=s(529),F=s(9651),x=s(387),f=s(6895),C=s(5156),z=s(3679),d=s(6704),u=s(5e3),O=s(7096),Z=s(8231),T=s(834),v=s(6616),W=s(7044),q=s(1811),J=s(5635),M=s(9597),U=s(6672);function E(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"input",25),e.NdJ("ngModelChange",function(i){e.CHM(t);const l=e.oxw().$implicit;return e.KtG(l.userNo=i)}),e.qZA()}if(2&o){const t=e.oxw().$implicit;e.Q6J("ngModel",t.userNo)}}function N(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"a",28),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2).$implicit,l=e.oxw();return e.KtG(l.showLogList(i))}),e._uU(1),e.qZA()}if(2&o){const t=e.oxw(2).$implicit;e.xp6(1),e.Oqu(t.userNo)}}function B(o,r){if(1&o&&e._uU(0),2&o){const t=e.oxw(2).$implicit;e.Oqu(t.userNo)}}function D(o,r){if(1&o&&(e.YNc(0,N,2,1,"a",26),e.YNc(1,B,1,1,"ng-template",null,27,e.W1O)),2&o){const t=e.MAs(2),n=e.oxw().$implicit;e.Q6J("ngIf",1===n.status)("ngIfElse",t)}}function V(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"input",29),e.NdJ("ngModelChange",function(i){e.CHM(t);const l=e.oxw().$implicit;return e.KtG(l.username=i)}),e.qZA()}if(2&o){const t=e.oxw().$implicit;e.Q6J("ngModel",t.username)}}function y(o,r){if(1&o&&e._uU(0),2&o){const t=e.oxw().$implicit;e.Oqu(t.username)}}function I(o,r){if(1&o&&e._UZ(0,"nz-option",30),2&o){const t=r.$implicit;e.Q6J("nzLabel",t.address)("nzValue",t)}}function S(o,r){1&o&&e._UZ(0,"span")}function Q(o,r){if(1&o&&(e.TgZ(0,"nz-tag",33),e._uU(1),e.qZA()),2&o){const t=e.oxw(2).$implicit;e.xp6(1),e.Oqu(null==t||null==t.staffClock?null:t.staffClock.clockTimeMin)}}function w(o,r){if(1&o&&(e.TgZ(0,"nz-tag",34),e._uU(1),e.qZA()),2&o){const t=e.oxw(2).$implicit;e.xp6(1),e.Oqu(null==t||null==t.staffClock?null:t.staffClock.clockTimeMin)}}function $(o,r){if(1&o&&(e.YNc(0,Q,2,1,"nz-tag",31),e.YNc(1,w,2,1,"ng-template",null,32,e.W1O)),2&o){const t=e.MAs(2),n=e.oxw().$implicit;e.Q6J("ngIf",611===(null==n||null==n.staffClock?null:n.staffClock.clockWorkOnStatus))("ngIfElse",t)}}function Y(o,r){1&o&&e._UZ(0,"span")}function L(o,r){if(1&o&&(e.TgZ(0,"nz-tag",33),e._uU(1),e.qZA()),2&o){const t=e.oxw(2).$implicit;e.xp6(1),e.Oqu(null==t||null==t.staffClock?null:t.staffClock.clockTimeMax)}}function P(o,r){if(1&o&&(e.TgZ(0,"nz-tag",34),e._uU(1),e.qZA()),2&o){const t=e.oxw(2).$implicit;e.xp6(1),e.Oqu(null==t||null==t.staffClock?null:t.staffClock.clockTimeMax)}}function H(o,r){if(1&o&&(e.YNc(0,L,2,1,"nz-tag",31),e.YNc(1,P,2,1,"ng-template",null,35,e.W1O)),2&o){const t=e.MAs(2),n=e.oxw().$implicit;e.Q6J("ngIf",611===(null==n||null==n.staffClock?null:n.staffClock.clockWorkOffStatus))("ngIfElse",t)}}function G(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"button",36),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,l=e.oxw();return e.KtG(l.gotoWork(i))}),e._uU(2,"\u6253\u5361"),e.qZA(),e._uU(3," \xa0 "),e.TgZ(4,"button",36),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,l=e.oxw();return e.KtG(l.repairWork(i))}),e._uU(5,"\u8865\u5361"),e.qZA(),e._uU(6," \xa0 "),e.TgZ(7,"button",36),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,l=e.oxw();return e.KtG(l.showDeviceList(i))}),e._uU(8,"\u67e5\u770b\u8bbe\u5907"),e.qZA()()}}function K(o,r){if(1&o&&e._UZ(0,"nz-alert",37),2&o){const t=e.oxw().$implicit;e.Q6J("nzMessage",t.message)}}function R(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"td",13),e.NdJ("nzCheckedChange",function(i){const a=e.CHM(t).$implicit,_=e.oxw();return e.KtG(_.onItemChecked(a.userNo,i))}),e.qZA(),e.TgZ(2,"td"),e.YNc(3,E,1,1,"input",14),e.YNc(4,D,3,2,"ng-template",null,15,e.W1O),e.qZA(),e.TgZ(6,"td"),e.YNc(7,V,1,1,"input",16),e.YNc(8,y,1,1,"ng-template",null,17,e.W1O),e.qZA(),e.TgZ(10,"td")(11,"nz-select",18),e.NdJ("ngModelChange",function(i){const a=e.CHM(t).$implicit;return e.KtG(a.addr=i)}),e.YNc(12,I,1,2,"nz-option",19),e.qZA()(),e.TgZ(13,"td"),e.YNc(14,S,1,0,"span",20),e.YNc(15,$,3,2,"ng-template",null,21,e.W1O),e.qZA(),e.TgZ(17,"td"),e.YNc(18,Y,1,0,"span",20),e.YNc(19,H,3,2,"ng-template",null,22,e.W1O),e.qZA(),e.TgZ(21,"td")(22,"nz-date-picker",23),e.NdJ("ngModelChange",function(i){const a=e.CHM(t).$implicit;return e.KtG(a.clockTimeOfDate=i)}),e.qZA()(),e.TgZ(23,"td"),e.YNc(24,G,9,0,"div",20),e.YNc(25,K,1,1,"ng-template",null,24,e.W1O),e.qZA()()}if(2&o){const t=r.$implicit,n=e.MAs(5),i=e.MAs(9),l=e.MAs(16),a=e.MAs(20),_=e.MAs(26),m=e.oxw();e.xp6(1),e.Q6J("nzChecked",m.setOfCheckedId.has(t.userNo)),e.xp6(2),e.Q6J("ngIf",t.edited)("ngIfElse",n),e.xp6(4),e.Q6J("ngIf",t.edited)("ngIfElse",i),e.xp6(4),e.Q6J("ngModel",t.addr)("nzDropdownMatchSelectWidth",!1)("compareWith",m.compareAddrFn),e.xp6(1),e.Q6J("ngForOf",m.addresses),e.xp6(2),e.Q6J("ngIf",null===(null==t||null==t.staffClock?null:t.staffClock.clockWorkOnStatus))("ngIfElse",l),e.xp6(4),e.Q6J("ngIf",null===(null==t||null==t.staffClock?null:t.staffClock.clockWorkOffStatus))("ngIfElse",a),e.xp6(4),e.Q6J("ngModel",t.clockTimeOfDate),e.xp6(2),e.Q6J("ngIf",1===t.status)("ngIfElse",_)}}function j(o,r){if(1&o&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.xp6(1),e.hij(" ",t," ")}}function X(o,r){1&o&&(e.ynx(0),e._uU(1,"cron\u8868\u8fbe\u5f0f\u5fc5\u987b\u586b!"),e.BQk())}function ee(o,r){1&o&&e.YNc(0,X,2,0,"ng-container",43),2&o&&e.Q6J("ngIf",r.$implicit.hasError("required"))}function te(o,r){if(1&o&&(e.ynx(0),e.TgZ(1,"form",38)(2,"nz-form-item"),e.YNc(3,j,2,1,"div",8),e.qZA(),e.TgZ(4,"nz-form-item")(5,"nz-form-label",39),e._uU(6,"cron\u8868\u8fbe\u5f0f"),e.qZA(),e.TgZ(7,"nz-form-control",40),e._UZ(8,"input",41),e.YNc(9,ee,1,1,"ng-template",null,42,e.W1O),e.qZA()()(),e.BQk()),2&o){const t=e.MAs(10),n=e.oxw();e.xp6(1),e.Q6J("formGroup",n.validateJobForm),e.xp6(2),e.Q6J("ngForOf",n.title.split(";")),e.xp6(4),e.Q6J("nzErrorTip",t)}}function ne(o,r){1&o&&(e.ynx(0),e._uU(1,"\u8bf7\u8f93\u5165\u7ecf\u5ea6!"),e.BQk())}function oe(o,r){1&o&&e.YNc(0,ne,2,0,"ng-container",43),2&o&&e.Q6J("ngIf",r.$implicit.hasError("required"))}function ie(o,r){1&o&&(e.ynx(0),e._uU(1,"\u8bf7\u8f93\u5165\u7eac\u5ea6!"),e.BQk())}function le(o,r){1&o&&e.YNc(0,ie,2,0,"ng-container",43),2&o&&e.Q6J("ngIf",r.$implicit.hasError("required"))}function re(o,r){1&o&&(e.ynx(0),e._uU(1,"\u8bf7\u8f93\u5165\u5730\u5740!"),e.BQk())}function se(o,r){1&o&&e.YNc(0,re,2,0,"ng-container",43),2&o&&e.Q6J("ngIf",r.$implicit.hasError("required"))}function ae(o,r){if(1&o&&(e.ynx(0),e.TgZ(1,"form",38)(2,"nz-form-item")(3,"nz-form-label",39),e._uU(4,"\u7ecf\u5ea6"),e.qZA(),e.TgZ(5,"nz-form-control",40),e._UZ(6,"nz-input-number",44),e.YNc(7,oe,1,1,"ng-template",null,45,e.W1O),e.qZA()(),e.TgZ(9,"nz-form-item")(10,"nz-form-label",39),e._uU(11,"\u7eac\u5ea6"),e.qZA(),e.TgZ(12,"nz-form-control",40),e._UZ(13,"nz-input-number",46),e.YNc(14,le,1,1,"ng-template",null,47,e.W1O),e.qZA()(),e.TgZ(16,"nz-form-item")(17,"nz-form-label",39),e._uU(18,"\u5730\u5740"),e.qZA(),e.TgZ(19,"nz-form-control",40),e._UZ(20,"input",48),e.YNc(21,se,1,1,"ng-template",null,49,e.W1O),e.qZA()()(),e.BQk()),2&o){const t=e.MAs(8),n=e.MAs(15),i=e.MAs(22),l=e.oxw();e.xp6(1),e.Q6J("formGroup",l.validateAddrForm),e.xp6(4),e.Q6J("nzErrorTip",t),e.xp6(1),e.Q6J("nzPrecision",7)("nzMin",0),e.xp6(6),e.Q6J("nzErrorTip",n),e.xp6(1),e.Q6J("nzPrecision",7)("nzMin",0),e.xp6(6),e.Q6J("nzErrorTip",i)}}function ce(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.qZA(),e.TgZ(15,"td"),e._uU(16),e.qZA(),e.TgZ(17,"td"),e._uU(18),e.qZA(),e.TgZ(19,"td"),e._uU(20),e.qZA(),e.TgZ(21,"td")(22,"button",36),e.NdJ("click",function(){const l=e.CHM(t).$implicit,a=e.oxw(2);return e.KtG(a.resetBindDevice(l))}),e._uU(23,"\u91cd\u65b0\u7ed1\u5b9a"),e.qZA()()()}if(2&o){const t=r.$implicit;e.xp6(2),e.Oqu(t.id),e.xp6(2),e.Oqu(t.bindDeviceId),e.xp6(2),e.Oqu(t.deviceId),e.xp6(2),e.Oqu(t.model),e.xp6(2),e.Oqu(t.systemName),e.xp6(2),e.Oqu(t.systemVersion),e.xp6(2),e.Oqu(t.resolution),e.xp6(2),e.Oqu(t.pushId),e.xp6(2),e.Oqu(t.createTime),e.xp6(2),e.Oqu(t.updateTime)}}const A=function(){return{y:"600px"}};function ue(o,r){if(1&o&&(e.ynx(0),e.TgZ(1,"nz-table",50,3)(3,"thead")(4,"tr")(5,"th",51),e._uU(6,"ID"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"\u7ed1\u5b9a\u8bbe\u5907\u6807\u8bc6"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"\u624b\u673a\u552f\u4e00\u6807\u8bc6"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"\u673a\u578b"),e.qZA(),e.TgZ(13,"th"),e._uU(14,"OS"),e.qZA(),e.TgZ(15,"th"),e._uU(16,"OS\u7248\u672c"),e.qZA(),e.TgZ(17,"th"),e._uU(18,"\u5206\u8fa8\u7387"),e.qZA(),e.TgZ(19,"th"),e._uU(20,"\u8bbe\u5907\u63a8\u9001ID"),e.qZA(),e.TgZ(21,"th",5),e._uU(22,"\u521b\u5efa\u65f6\u95f4"),e.qZA(),e.TgZ(23,"th",5),e._uU(24,"\u66f4\u65b0\u65f6\u95f4"),e.qZA(),e.TgZ(25,"th",5),e._uU(26,"\u64cd\u4f5c"),e.qZA()()(),e.TgZ(27,"tbody"),e.YNc(28,ce,24,10,"tr",8),e.qZA()(),e.BQk()),2&o){const t=e.MAs(2),n=e.oxw();e.xp6(1),e.Q6J("nzData",n.deviList)("nzScroll",e.DdM(5,A))("nzFrontPagination",!1)("nzShowPagination",!1),e.xp6(27),e.Q6J("ngForOf",t.data)}}function _e(o,r){if(1&o&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.qZA(),e.TgZ(15,"td"),e._uU(16),e.qZA()()),2&o){const t=r.$implicit;e.xp6(2),e.Oqu(t.id),e.xp6(2),e.Oqu(t.staff_no),e.xp6(2),e.Oqu(t.clock_time),e.xp6(2),e.Oqu(t.create_time),e.xp6(2),e.Oqu(t.longitude),e.xp6(2),e.Oqu(t.latitude),e.xp6(2),e.Oqu(t.address),e.xp6(2),e.Oqu(0===t.clock_type?"OA\u6253\u5361":"\u5ba1\u6279\u8865\u5361")}}function de(o,r){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"nz-range-picker",52),e.NdJ("ngModelChange",function(i){e.CHM(t);const l=e.oxw();return e.KtG(l.current.dateRange=i)}),e.qZA(),e._uU(2," \xa0 "),e.TgZ(3,"button",0),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.showLogList(i.current))}),e._uU(4,"\u67e5\u8be2"),e.qZA(),e._UZ(5,"br")(6,"br"),e.TgZ(7,"nz-table",53,3)(9,"thead")(10,"tr")(11,"th",5),e._uU(12,"\u4e3b\u952e"),e.qZA(),e.TgZ(13,"th",5),e._uU(14,"\u5458\u5de5\u7f16\u53f7"),e.qZA(),e.TgZ(15,"th",6),e._uU(16,"\u6253\u5361\u65f6\u95f4"),e.qZA(),e.TgZ(17,"th",6),e._uU(18,"\u521b\u5efa\u65f6\u95f4"),e.qZA(),e.TgZ(19,"th",5),e._uU(20,"\u7ecf\u5ea6"),e.qZA(),e.TgZ(21,"th",5),e._uU(22,"\u7eac\u5ea6"),e.qZA(),e.TgZ(23,"th"),e._uU(24,"\u6253\u5361\u5730\u5740"),e.qZA(),e.TgZ(25,"th",5),e._uU(26,"\u6253\u5361\u7c7b\u578b"),e.qZA()()(),e.TgZ(27,"tbody"),e.YNc(28,_e,17,8,"tr",8),e.qZA()(),e.BQk()}if(2&o){const t=e.MAs(8),n=e.oxw();e.xp6(1),e.Q6J("ngModel",n.current.dateRange),e.xp6(6),e.Q6J("nzData",n.logList)("nzScroll",e.DdM(4,A)),e.xp6(21),e.Q6J("ngForOf",t.data)}}const me=[{path:"",component:(()=>{class o{constructor(t,n,i,l){this.http=t,this.messageService=n,this.notificationService=i,this.fb=l,this.isLogVisible=!1,this.isAddrVisible=!1,this.isDeviVisible=!1,this.isJobVisible=!1,this.checked=!1,this.indeterminate=!1,this.setOfCheckedId=new Set,this.compareAddrFn=(a,_)=>a&&_?a.id===_.id:a===_,this.validateAddrForm=this.fb.group({address:[null,[c.kI.required]],longitude:[null,[c.kI.required]],latitude:[null,[c.kI.required]],id:null}),this.validateJobForm=this.fb.group({cronExpression:[null,[c.kI.required]]})}ngOnInit(){var t=this;return(0,k.Z)(function*(){t.addresses=(yield t.http.get("/hello/addresses").toPromise()).data,t.users=(yield t.http.get("/hello/users").toPromise()).data,t.users.forEach(n=>t.initStaffClockV1(n)),t.http.get("/hello/triggers").subscribe(({status:n,message:i})=>{1===n&&t.notificationService.info("\u5b9a\u65f6\u4efb\u52a1",i,{nzPlacement:"bottomRight"})})})()}initStaffClockV1(t){this.http.post("/hello/initstaffclock",t).subscribe(({message:n,status:i,data:l})=>{t.message=n,t.status=i,t.staffClock=l,t.addr=this.addresses[0]})}initStaffClockV2(t){this.http.post("/hello/initstaffclock",t).subscribe(({message:n,status:i,data:l})=>{t.message=n,t.status=i,t.staffClock=l})}openUser(){const t=this.users.map(({userNo:i})=>+i),n=`${Math.max(...t)+1}`;this.users.push({userNo:n,username:null,addr:this.addresses[0],status:1,edited:!0}),this.users=this.users.slice(),this.refreshCheckedStatus()}gotoWork(t){if(!t.userNo||0===t.userNo.length)return void this.notificationService.error("\u64cd\u4f5c\u63d0\u793a","\u8bf7\u8f93\u5165\u5458\u5de5\u7f16\u53f7!");if(!t.username||0===t.username.length)return void this.notificationService.error("\u64cd\u4f5c\u63d0\u793a","\u8bf7\u8f93\u5165\u5458\u5de5\u59d3\u540d!");const n={...t,...t.addr};n.addr=null,n.staffClock=null,this.http.post("/hello/v1/userloginandstaffclock",n).subscribe(({message:i,status:l,data:a})=>{t.message=i,t.status=l,t.staffClock=a})}repairWork(t){if(!t.userNo||0===t.userNo.length)return void this.notificationService.error("\u64cd\u4f5c\u63d0\u793a","\u8bf7\u8f93\u5165\u5458\u5de5\u7f16\u53f7!");if(!t.username||0===t.username.length)return void this.notificationService.error("\u64cd\u4f5c\u63d0\u793a","\u8bf7\u8f93\u5165\u5458\u5de5\u59d3\u540d!");if(!t.clockTimeOfDate)return void this.notificationService.error("\u64cd\u4f5c\u63d0\u793a","\u8bf7\u9009\u62e9\u65e5\u671f!");t.clockTime=(0,h.Z)(t.clockTimeOfDate,"yyyy-MM-dd HH:mm:ss");const n={...t,...t.addr};n.addr=null,n.staffClock=null,this.http.post("/hello/v2/userloginandstaffclock",n).subscribe(({status:i,message:l})=>{0===i?this.notificationService.error("\u64cd\u4f5c\u63d0\u793a",l):(this.notificationService.success("\u64cd\u4f5c\u63d0\u793a",`[ ${t.userNo} - ${t.username} ] \u8865\u5361\u6210\u529f`),this.initStaffClockV2(t))})}showDeviceList(t){this.http.post("/hello/selectdevicelist",t).subscribe(({data:n})=>{this.deviList=n.items||[],this.title=`${t.username} - \u8bbe\u5907\u7ed1\u5b9a\u8bb0\u5f55`,this.isDeviVisible=!0})}resetBindDevice(t){const n=Object.entries(t).filter(i=>!!i[1]).map(i=>i.join("=")).join("&");this.http.post("/hello/resetbinddevice",n,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).subscribe(({data:i})=>{this.deviList=i.items||[]})}showLogList(t){this.current=t,this.current.dateRange&&(this.current.dates=2===this.current.dateRange.length?this.current.dateRange.map(n=>(0,h.Z)(n,"yyyy-MM-dd")):null),this.http.post("/hello/selectappstaffclockloglist",t).subscribe(({data:n})=>{this.logList=n||[],this.title=`${t.username} - \u6253\u5361\u8bb0\u5f55`,this.isLogVisible=!0})}handleLogCancel(){this.isLogVisible=!1,this.current.dateRange=null,this.current.dates=null}handleDeviCancel(){this.isDeviVisible=!1}handleLogOk(){this.isLogVisible=!1,this.current.dateRange=null,this.current.dates=null}handleDeviOk(){this.isDeviVisible=!1}openAddr(){this.isAddrVisible=!0}openJob(){const t=this.users.filter(({userNo:n})=>this.setOfCheckedId.has(n));this.title="",t.forEach(({userNo:n,username:i,addr:l})=>{this.title+=`${n} - ${i} - ${l.address};`}),this.isJobVisible=!0}pauseJob(){this.http.get("/hello/pausejob").subscribe(({status:t,message:n})=>{1===t?this.notificationService.success("\u64cd\u4f5c\u63d0\u793a",n):this.notificationService.error("\u64cd\u4f5c\u63d0\u793a",n)})}resumeJob(){this.http.get("/hello/resumejob").subscribe(({status:t,message:n})=>{1===t?this.notificationService.success("\u64cd\u4f5c\u63d0\u793a",n):this.notificationService.error("\u64cd\u4f5c\u63d0\u793a",n)})}submitAddrForm(t){for(const n in this.validateAddrForm.controls)this.validateAddrForm.controls.hasOwnProperty(n)&&(this.validateAddrForm.controls[n].markAsDirty(),this.validateAddrForm.controls[n].updateValueAndValidity());this.validateAddrForm.valid&&(t.id=this.addresses.length+1,this.addresses.push(t),this.resetAddrForm(),this.isAddrVisible=!1)}submitJobForm(t){for(const n in this.validateJobForm.controls)this.validateJobForm.controls.hasOwnProperty(n)&&(this.validateJobForm.controls[n].markAsDirty(),this.validateJobForm.controls[n].updateValueAndValidity());if(this.validateJobForm.valid){const i={users:this.users.filter(({userNo:l})=>this.setOfCheckedId.has(l)).map(l=>{const a={...l,...l.addr};return a.addr=null,a.staffClock=null,a}),cronExpression:t.cronExpression};this.http.post("/hello/savejob",i).subscribe(({status:l,message:a})=>{1===l?(this.notificationService.success("\u64cd\u4f5c\u63d0\u793a",a),setTimeout(()=>{this.setOfCheckedId.clear(),this.refreshCheckedStatus(),this.resetJobForm(),this.isJobVisible=!1},1e3)):this.notificationService.error("\u64cd\u4f5c\u63d0\u793a",a)})}}resetAddrForm(){this.isAddrVisible=!1,this.validateAddrForm.reset();for(const t in this.validateAddrForm.controls)this.validateAddrForm.controls.hasOwnProperty(t)&&(this.validateAddrForm.controls[t].markAsPristine(),this.validateAddrForm.controls[t].updateValueAndValidity())}resetJobForm(){this.isJobVisible=!1,this.validateJobForm.reset();for(const t in this.validateJobForm.controls)this.validateJobForm.controls.hasOwnProperty(t)&&(this.validateJobForm.controls[t].markAsPristine(),this.validateJobForm.controls[t].updateValueAndValidity())}onAllChecked(t){this.users.forEach(({userNo:n})=>this.updateCheckedSet(n,t)),this.refreshCheckedStatus()}updateCheckedSet(t,n){n?this.setOfCheckedId.add(t):this.setOfCheckedId.delete(t)}refreshCheckedStatus(){this.checked=this.users.every(({userNo:t})=>this.setOfCheckedId.has(t)),this.indeterminate=this.users.some(({userNo:t})=>this.setOfCheckedId.has(t))&&!this.checked}onItemChecked(t,n){this.updateCheckedSet(t,n),this.refreshCheckedStatus()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(b.eN),e.Y36(F.dD),e.Y36(x.zb),e.Y36(c.QS))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-welcome"]],decls:45,vars:19,consts:[["nz-button","","nzType","primary",3,"click"],["nz-button","","nzType","primary",3,"disabled","click"],[3,"nzData","nzFrontPagination","nzShowPagination"],["basicTable",""],["nzWidth","30px",3,"nzChecked","nzIndeterminate","nzCheckedChange"],["nzWidth","100px"],["nzWidth","200px"],["nzWidth","150px"],[4,"ngFor","ngForOf"],["nzTitle","\u5b9a\u65f6\u4efb\u52a1","nzWidth","400px",3,"nzVisible","nzMaskClosable","nzOkDisabled","nzVisibleChange","nzOnCancel","nzOnOk"],[4,"nzModalContent"],["nzTitle","\u516c\u53f8\u5730\u5740","nzWidth","400px",3,"nzVisible","nzMaskClosable","nzOkDisabled","nzVisibleChange","nzOnCancel","nzOnOk"],["nzWidth","1440px",3,"nzVisible","nzTitle","nzFooter","nzVisibleChange","nzOnCancel","nzOnOk"],[3,"nzChecked","nzCheckedChange"],["nz-input","","placeholder","\u5458\u5de5\u7f16\u53f7",3,"ngModel","ngModelChange",4,"ngIf","ngIfElse"],["userno",""],["nz-input","","placeholder","\u5458\u5de5\u59d3\u540d",3,"ngModel","ngModelChange",4,"ngIf","ngIfElse"],["username",""],[2,"width","200px",3,"ngModel","nzDropdownMatchSelectWidth","compareWith","ngModelChange"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],[4,"ngIf","ngIfElse"],["clockworkonstatus",""],["clockworkoffstatus",""],["nzShowTime","","nzInputReadOnly","","nzBackdrop","","nzMode","date",3,"ngModel","ngModelChange"],["elseBlock",""],["nz-input","","placeholder","\u5458\u5de5\u7f16\u53f7",3,"ngModel","ngModelChange"],[3,"click",4,"ngIf","ngIfElse"],["elseBlockChild",""],[3,"click"],["nz-input","","placeholder","\u5458\u5de5\u59d3\u540d",3,"ngModel","ngModelChange"],[3,"nzLabel","nzValue"],["nzColor","green",4,"ngIf","ngIfElse"],["clockworkonstatusChild",""],["nzColor","green"],["nzColor","red"],["clockworkoffstatusChild",""],["nz-button","","nzType","primary","nzDanger","",3,"click"],["nzType","error","nzShowIcon","",3,"nzMessage"],["nz-form","",3,"formGroup"],["nzRequired",""],["nzHasFeedback","",3,"nzErrorTip"],["nz-input","","formControlName","cronExpression","placeholder","\u8bf7\u8f93\u5165cron\u8868\u8fbe\u5f0f"],["cronErrorTpl",""],[4,"ngIf"],["formControlName","longitude","nzPlaceHolder","\u8bf7\u8f93\u5165\u7ecf\u5ea6","nzPrecisionMode","cut",2,"width","100%",3,"nzPrecision","nzMin"],["longitudeErrorTpl",""],["formControlName","latitude","nzPlaceHolder","\u8bf7\u8f93\u5165\u7eac\u5ea6","nzPrecisionMode","cut",2,"width","100%",3,"nzPrecision","nzMin"],["latitudeErrorTpl",""],["nz-input","","formControlName","address","placeholder","\u8bf7\u8f93\u5165\u5730\u5740"],["addressErrorTpl",""],["nzSize","small",3,"nzData","nzScroll","nzFrontPagination","nzShowPagination"],["nzWidth","50px"],["nzBackdrop","","nzInputReadOnly","","nzMode","date",3,"ngModel","ngModelChange"],["nzSize","small","nzShowPagination","","nzShowQuickJumper","","nzShowSizeChanger","",3,"nzData","nzScroll"]],template:function(t,n){if(1&t&&(e.TgZ(0,"button",0),e.NdJ("click",function(){return n.openUser()}),e._uU(1,"\u6dfb\u52a0\u5458\u5de5"),e.qZA(),e._uU(2,"\n\xa0\n"),e.TgZ(3,"button",0),e.NdJ("click",function(){return n.openAddr()}),e._uU(4,"\u6dfb\u52a0\u5730\u5740"),e.qZA(),e._uU(5,"\n\xa0\n"),e.TgZ(6,"button",1),e.NdJ("click",function(){return n.openJob()}),e._uU(7,"\u521b\u5efa|\u66f4\u65b0\u5b9a\u65f6\u4efb\u52a1"),e.qZA(),e._uU(8,"\n\xa0\n"),e.TgZ(9,"button",0),e.NdJ("click",function(){return n.pauseJob()}),e._uU(10,"\u6682\u505c\u5b9a\u65f6\u4efb\u52a1"),e.qZA(),e._uU(11,"\n\xa0\n"),e.TgZ(12,"button",0),e.NdJ("click",function(){return n.resumeJob()}),e._uU(13,"\u6062\u590d\u5b9a\u65f6\u4efb\u52a1"),e.qZA(),e._UZ(14,"br")(15,"br"),e.TgZ(16,"nz-table",2,3)(18,"thead")(19,"tr")(20,"th",4),e.NdJ("nzCheckedChange",function(l){return n.onAllChecked(l)}),e.qZA(),e.TgZ(21,"th",5),e._uU(22,"\u7f16\u53f7"),e.qZA(),e.TgZ(23,"th",5),e._uU(24,"\u59d3\u540d"),e.qZA(),e.TgZ(25,"th",6),e._uU(26,"\u5730\u5740"),e.qZA(),e.TgZ(27,"th",7),e._uU(28,"\u4e0a\u73ed"),e.qZA(),e.TgZ(29,"th",7),e._uU(30,"\u4e0b\u73ed"),e.qZA(),e.TgZ(31,"th",6),e._uU(32,"\u65e5\u671f"),e.qZA(),e.TgZ(33,"th",6),e._uU(34,"\u64cd\u4f5c"),e.qZA()()(),e.TgZ(35,"tbody"),e.YNc(36,R,27,16,"tr",8),e.qZA()(),e.TgZ(37,"nz-modal",9),e.NdJ("nzVisibleChange",function(l){return n.isJobVisible=l})("nzOnCancel",function(){return n.resetJobForm()})("nzOnOk",function(){return n.submitJobForm(n.validateJobForm.value)}),e.YNc(38,te,11,3,"ng-container",10),e.qZA(),e.TgZ(39,"nz-modal",11),e.NdJ("nzVisibleChange",function(l){return n.isAddrVisible=l})("nzOnCancel",function(){return n.resetAddrForm()})("nzOnOk",function(){return n.submitAddrForm(n.validateAddrForm.value)}),e.YNc(40,ae,23,8,"ng-container",10),e.qZA(),e.TgZ(41,"nz-modal",12),e.NdJ("nzVisibleChange",function(l){return n.isDeviVisible=l})("nzOnCancel",function(){return n.handleDeviCancel()})("nzOnOk",function(){return n.handleDeviOk()}),e.YNc(42,ue,29,6,"ng-container",10),e.qZA(),e.TgZ(43,"nz-modal",12),e.NdJ("nzVisibleChange",function(l){return n.isLogVisible=l})("nzOnCancel",function(){return n.handleLogCancel()})("nzOnOk",function(){return n.handleLogOk()}),e.YNc(44,de,29,5,"ng-container",10),e.qZA()),2&t){const i=e.MAs(17);e.xp6(6),e.Q6J("disabled",0===n.setOfCheckedId.size),e.xp6(10),e.Q6J("nzData",n.users)("nzFrontPagination",!1)("nzShowPagination",!1),e.xp6(4),e.Q6J("nzChecked",n.checked)("nzIndeterminate",n.indeterminate),e.xp6(16),e.Q6J("ngForOf",i.data),e.xp6(1),e.Q6J("nzVisible",n.isJobVisible)("nzMaskClosable",!1)("nzOkDisabled",!n.validateJobForm.valid),e.xp6(2),e.Q6J("nzVisible",n.isAddrVisible)("nzMaskClosable",!1)("nzOkDisabled",!n.validateAddrForm.valid),e.xp6(2),e.Q6J("nzVisible",n.isDeviVisible)("nzTitle",n.title)("nzFooter",null),e.xp6(2),e.Q6J("nzVisible",n.isLogVisible)("nzTitle",n.title)("nzFooter",null)}},dependencies:[f.sg,f.O5,c._Y,c.Fj,c.JJ,c.JL,c.On,c.sg,c.u,C.du,C.Hf,z.t3,z.SK,d.Lr,d.Nx,d.iK,d.Fd,u.N8,u.Uo,u._C,u.h7,u.Om,u.p0,u.$Z,u.g6,O._V,Z.Ip,Z.Vq,T.uw,T.wS,v.ix,W.w,q.dQ,J.Zp,M.r,U.j]}),o})()}];let pe=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[g.Bz.forChild(me),g.Bz]}),o})();var ge=s(1053);let he=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[pe,ge.m]}),o})()}}]);
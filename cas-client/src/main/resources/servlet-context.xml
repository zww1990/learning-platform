<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:p="http://www.springframework.org/schema/p"
	xmlns:context="http://www.springframework.org/schema/context"
	xmlns:mvc="http://www.springframework.org/schema/mvc"
	xsi:schemaLocation="http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-4.3.xsd
		http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.3.xsd
		http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.3.xsd">

	<context:property-placeholder location="classpath:cas.properties"/>
	<context:annotation-config/>
	<context:component-scan base-package="com.example.client.web"/>
	<mvc:annotation-driven/>
	<mvc:view-resolvers>
		<mvc:jsp cache-views="false" prefix="/WEB-INF/views/" suffix=".jsp"/>
	</mvc:view-resolvers>

	<!-- 实现单点登出协议。 它处理注册会话并销毁会话。 -->
	<bean class="org.jasig.cas.client.session.SingleSignOutFilter" id="singleSignOutFilter">
		<!-- CAS服务器的前缀url。 -->
		<property name="casServerUrlPrefix" value="${cas.server.url}" />
	</bean>

	<!-- AuthenticationFilter是来检测用户是否需要被认证。 如果用户需要认证，则会将用户重定向到CAS服务器。 -->
	<bean class="org.jasig.cas.client.authentication.AuthenticationFilter"
		id="authenticationFilter">
		<!-- 定义CAS服务器登录URL的位置 -->
		<property name="casServerLoginUrl" value="${cas.server.login.url}" />
		<!-- 要发送到CAS服务器的服务URL -->
		<property name="service" value="${cas.client.url}" />
	</bean>

	<!-- 使用CAS 2.0协议验证票据。 如果您提供acceptAnyProxy或allowedProxyChains参数，将构建一个Cas20ProxyTicketValidator。 
	否则将构建一个不接受代理票据的通用Cas20ServiceTicketValidator。 -->
	<bean
		class="org.jasig.cas.client.validation.Cas20ProxyReceivingTicketValidationFilter"
		id="ticketValidationFilter">
		<!-- 该应用程序托管的服务器的名称。 将使用此动态构建服务URL -->
		<property name="service" value="${cas.client.url}" />
		<!-- 将用来验证票据的票据验证器。 -->
		<property name="ticketValidator">
			<bean class="org.jasig.cas.client.validation.Cas20ServiceTicketValidator">
				<constructor-arg index="0" value="${cas.server.url}" />
			</bean>
		</property>
	</bean>
</beans>
